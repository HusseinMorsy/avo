
<thead class="bg-gray-200 border-t border-b border-gray-500 pb-1">
  <th>
    <!-- Select cell -->
  </th>
  <%
    fields.each_with_index do |field, index|
      if params[:sort_by] == field[:id].to_s
        if params[:sort_direction] == 'asc'
          sort_by = nil
        else
          sort_by = field[:id]
        end

        if sort_by.present?
          case params[:sort_direction]
            when nil
              sort_direction = 'desc'
            when 'desc'
              sort_direction = 'asc'
            when 'asc'
              sort_direction = nil
            end
        else
          sort_direction = nil
        end
      else
        sort_by = field[:id]
        sort_direction = 'desc'
      end
  %>
    <th class="text-left uppercase px-3 py-2">
      <%= link_to request.params.merge(sort_by: sort_by, sort_direction: sort_direction), class: "flex items-center text-gray-700 leading-tight text-xs font-semibold #{'cursor-pointer' if field[:sortable]}" do %>
        <%= field[:name] %>
        <% if field[:sortable] %>
          <%= render partial: 'sortable_component', locals: {field: field} %>
        <% end %>
      <% end %>
    </th>
  <% end %>

  <th class="w-24">
    <!-- Controls cell -->
  </th>
</thead>
